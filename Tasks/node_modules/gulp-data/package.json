{
  "name": "gulp-data",
  "version": "0.0.2",
  "description": "Generate a data object from a variety of sources: json, front-matter, database, anything... and set it to the file object for other plugins to consume.",
  "keywords": [
    "gulpplugin",
    "data",
    "json",
    "gulp"
  ],
  "author": {
    "name": "Colyn Brown",
    "email": "colyn.brown@gmail.com",
    "url": "https://github.com/colynb"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/colynb/gulp-data"
  },
  "scripts": {
    "test": "istanbul test _mocha --report html -- test/*.js --reporter spec"
  },
  "dependencies": {
    "through2": "*",
    "gulp-util": "~2.2.0"
  },
  "devDependencies": {
    "mocha": "*",
    "coveralls": "*",
    "mocha-lcov-reporter": "*",
    "istanbul": "*",
    "event-stream": "*",
    "should": "~2.1.0"
  },
  "engines": {
    "node": ">=0.8.0",
    "npm": ">=1.2.10"
  },
  "license": "MIT",
  "readme": "# [gulp](https://github.com/wearefractal/gulp)-data\n\n[![Build Status](https://travis-ci.org/colynb/gulp-data.png?branch=master)](https://travis-ci.org/colynb/gulp-data)\n\n[![NPM](https://nodei.co/npm/gulp-data.png?stars&downloads)](https://npmjs.org/package/gulp-data)\n\n[Learn more about gulp.js, the streaming build system](http://gulpjs.com)\n\n## Introduction\n\nGulp-data proposes a common API for attaching data to the file object for other plugins to consume. With gulp-data you can generate a data object from a variety of sources: json, front-matter, database, anything... and set it to the file object for other plugins to consume.\n\nMany plugins, such as ```gulp-swig``` or ```gulp-jade``` allow for JSON data to be passed via their respective options parameter. However, frequently what you want is the ability to dynamically set the data based off the file name or some other attribute of the file. Without using another plugin, this becomes problematic - as the number of ways of getting at data (via JSON files, front-matter, data bases, etc) increases, the more plugin authors have to update their APIs to support these sources. The ```gulp-data``` plugin aims to standardize a method that is generic enough to encapsulate these data sources into a single ```data``` property attached to the file object. It's really up to you as to where your data comes from, a JSON file, from a front-matter section of the file, or even a database, ```gulp-data``` doesn't really care.\n\n## Usage\n\nFirst, install `gulp-data` as a development dependency:\n\n```shell\nnpm install --save-dev gulp-data\n```\n\nThen, add it to your `gulpfile.js`:\n\n```javascript\nvar gulp = require('gulp');\nvar swig = require('gulp-swig');\nvar data = require('gulp-data');\nvar fm = require('front-matter');\nvar path = require('path');\nvar MongoClient = require('mongodb').MongoClient;\n\n/*\n  Get data via JSON file, keyed on filename.\n*/\nvar getJsonData = function(file, cb) {\n  var jsonPath = './examples/' + path.basename(file.path) + '.json';\n  cb(require(jsonPath));\n};\n\ngulp.task('json-test', function() {\n  return gulp.src('./examples/test1.html')\n    .pipe(data(getJsonData))\n    .pipe(swig())\n    .pipe(gulp.dest('build'));\n});\n\nvar getFrontMatter = function(file, cb) {\n  var content = fm(String(file.contents));\n  file.contents = new Buffer(content.body);\n  cb(content.attributes);\n};\n\n/*\n  Get data via front matter\n*/\ngulp.task('fm-test', function() {\n  return gulp.src('./examples/test2.html')\n    .pipe(data(getFrontMatter))\n    .pipe(swig())\n    .pipe(gulp.dest('build'));\n});\n\n/*\n  Get data via database, keyed on filename.\n*/\nvar getMongoData = function(file, cb) {\n  MongoClient.connect('mongodb://127.0.0.1:27017/gulp-data-test', function(err, db) {\n    if(err) throw err;\n    var collection = db.collection('file-data-test');\n    collection.findOne({filename: path.basename(file.path)}, function(err, doc) {\n      db.close();\n      cb(doc);\n    });\n  });\n};\n\ngulp.task('db-test', function() {\n  return gulp.src('./examples/test3.html')\n    .pipe(data(getMongoData))\n    .pipe(swig())\n    .pipe(gulp.dest('build'));\n});\n\n```\n\n## API\n\n### data(dataFunction)\n\n#### dataFunction\nType: `Function`  \n\nDefine a function that returns a data object via a callback function. Could return JSON from a file, or an object returned from a database.\n\n## Note to gulp plugin authors\n\nIf your plugin needs a data object, one that normally gets passed in via your options parameter, please update the plugin to accept data from the ```file.data``` property. Here's how you can do it:\n\n```gulp-swig``` usually accepts data via its ```options.data``` parameter, but with a small change, it checks to see if there's a ```file.data``` property and if so, merges it into the data object.\n\n```\nvar data = opts.data || {};\nif (file.data) {\n  data = _.extend(file.data, data);\n}\n```\n\n## License\n\n[MIT License](http://en.wikipedia.org/wiki/MIT_License)\n\n[npm-url]: https://npmjs.org/package/gulp-data\n[npm-image]: https://badge.fury.io/js/gulp-data.png\n\n[travis-url]: http://travis-ci.org/colynb/gulp-data\n[travis-image]: https://secure.travis-ci.org/colynb/gulp-data.png?branch=master\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/colynb/gulp-data/issues"
  },
  "homepage": "https://github.com/colynb/gulp-data",
  "_id": "gulp-data@0.0.2",
  "_from": "gulp-data@0.0.2"
}
